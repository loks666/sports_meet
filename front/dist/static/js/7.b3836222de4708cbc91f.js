webpackJsonp([7],{dR3E:function(t,e){},f0lz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("2CGT"),r=i("NC6I"),a=i.n(r),l={name:"RetrievePwd",data:function(){return{content:"获取验证码",totalTime:30,canClick:!1,form:{id:"",email:"",pwd1:"",pwd2:"",code:""},rules:{id:[{required:!0,trigger:"blur",validator:this.validateId}],email:[{required:!0,trigger:"blur",validator:this.validateEmail}],pwd1:[{required:!0,trigger:"blur",validator:this.validatePass},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],pwd2:[{required:!0,trigger:"blur",validator:this.validatePass2}],code:[{required:!0,trigger:"blur",validator:this.validateCode}]}}},methods:{validateId:function(t,e,i){e?/^20[0-9]\d{9}$/.test(e)?i():(i(new Error("学号格式错误")),console.log("学号格式错误")):i(new Error("学号不能为空"))},validateEmail:function(t,e,i){e?/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?i():(i(new Error("邮箱格式错误")),console.log("邮箱格式错误")):i(new Error("邮箱不能为空"))},validatePass:function(t,e,i){e?/^[a-zA-Z0-9_]{1,30}$/.test(e)?i():(i(new Error("密码只能是数字、下划线、字母!")),console.log("密码只能是数字、下划线、字母!")):i(new Error("密码不能为空"))},validatePass2:function(t,e,i){e?e!=this.form.pwd1?i(new Error("两次输入密码不一致！")):i():i(new Error("请再次输入密码"))},validateCode:function(t,e,i){e?/[0-9]\d{3}$/.test(e)?i():(i(new Error("验证码格式错误")),console.log("验证码格式错误")):i(new Error("验证码不能为空"))},buttonCode:function(){var t=this;Object(o.H)({params:{usersStnumber:this.form.id,usersEmail:this.form.email}}).then(function(e){if(console.log("邮箱回调",e.data),"400"==e.data.code)t.$message({message:"学号或预留邮箱错误",type:"error"});else{if(t.canClick)return;t.canClick=!0,t.content=t.totalTime+"s后重新发送";var i=window.setInterval(function(){t.totalTime--,t.content=t.totalTime+"s后重新发送",t.totalTime<0&&(window.clearInterval(i),t.content="重新发送验证码",t.totalTime=30,t.canClick=!1)},1e3);t.$message({message:"验证码以发送至邮箱，请注意查收",type:"success"})}})},updatePwd:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return console.log("信息错误"),!1;Object(o.K)({params:{usersStnumber:t.form.id,usersPwd:a()(t.form.pwd1),emailCode:t.form.code}}).then(function(e){console.log("用户重置密码回调===》",e),"200"===e.data.code?(t.dialogFormVisible=!1,t.$message({message:"重置密码成功",type:"success"})):t.$message({message:"重置密码失败",type:"error"})})})},empty:function(){this.form.id=null,this.form.email=null,this.form.pwd1=null,this.form.pwd2=null,this.form.code=null},goLogin:function(){window.location.hash="#/login"}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{background:"#1da0fd"}},[i("div",{staticClass:"tops"},[i("div",{staticClass:"topsize"},[t._v("运动会报名系统")]),t._v(" "),i("div",{staticClass:"topsize2",on:{click:t.goLogin}},[t._v("| 返回登陆")])])]),t._v(" "),i("div",{staticClass:"bottoms"},[i("div",{staticClass:"forms"},[i("div",{staticStyle:{width:"150px",height:"45px"}}),t._v(" "),i("div",{staticStyle:{width:"150px",height:"30px"}},[t._v("| 修改密码")]),t._v(" "),i("el-form",{ref:"form",staticStyle:{"margin-top":"10px"},attrs:{model:t.form,rules:t.rules,"label-width":"153px"}},[i("el-form-item",{attrs:{label:"请输入学号：",prop:"id"}},[i("el-input",{staticStyle:{width:"295px","margin-left":"-60px"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"请输入预留邮箱：",prop:"email"}},[i("el-input",{staticStyle:{width:"295px","margin-left":"-60px"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"请输入新密码：",prop:"pwd1"}},[i("el-input",{staticStyle:{width:"295px","margin-left":"-60px"},model:{value:t.form.pwd1,callback:function(e){t.$set(t.form,"pwd1",e)},expression:"form.pwd1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"再次输入密码：",prop:"pwd2"}},[i("el-input",{staticStyle:{width:"295px","margin-left":"-60px"},model:{value:t.form.pwd2,callback:function(e){t.$set(t.form,"pwd2",e)},expression:"form.pwd2"}})],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"请输入验证码:",prop:"code"}},[i("el-input",{staticStyle:{width:"180px","margin-left":"-10px"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-button",{attrs:{disabled:t.canClick,type:"primary"},on:{click:t.buttonCode}},[t._v("\n              "+t._s(t.content)+"\n            ")])],1)],1)],1),t._v(" "),i("button",{staticClass:"button1",on:{click:t.empty}},[t._v("重 置")]),t._v(" "),i("button",{staticClass:"button2",on:{click:function(e){return t.updatePwd("form")}}},[t._v("确 定")])],1)])])},staticRenderFns:[]};var n=i("VU/8")(l,s,!1,function(t){i("dR3E")},"data-v-42a92030",null);e.default=n.exports}});
//# sourceMappingURL=7.b3836222de4708cbc91f.js.map