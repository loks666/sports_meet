webpackJsonp([4],{Y13X:function(e,t){},tDkG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={border:!0,index:!0,indexLabel:"序号",stripe:!0,calcHeight:30,searchMenuSpan:4,searchSpan:5,searchShowBtn:!1,addBtnText:"发布比赛",page:!1,addBtn:!1,align:"center",menuAlign:"center",formslot:!0,column:[{label:"比赛编号",prop:"competitionNb",hide:!0,editDisabled:!0,rules:[{required:!0,message:"比赛编号不能为空",trigger:"blur"},{validator:function(e,t,r){if(t){if(!/^glxy[0-9]\d{5}$/.test(t))return r(new Error("请输入正确的比赛编号"));r()}else r(new Error("请输入比赛编号"))},trigger:"blur"}]},{label:"比赛名称",prop:"competitionNe",rules:[{required:!0,message:"比赛名称不能为空",trigger:"blur"},{validator:function(e,t,r){if(t){if(!/^[\u4e00-\u9fa50-9]{4,12}$/.test(t))return r(new Error("请输入正确的比赛名称"));r()}else r(new Error("请输入比赛名称"))},trigger:"blur"}]},{label:"比赛开始时间",prop:"competitionStart",type:"datetime",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"比赛开始时间不能为空",trigger:"blur"}]},{label:"比赛结束时间",prop:"competitionEnd",type:"datetime",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"比赛结束时间不能为空",trigger:"blur"}]},{label:"报名开始时间",prop:"applyStart",type:"datetime",hide:!0,format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"报名开始时间不能为空",trigger:"blur"}]},{label:"报名结束时间",prop:"applyEnd",type:"datetime",hide:!0,format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"报名结束时间不能为空",trigger:"blur"}]},{label:"比赛地点",prop:"competitionSite",type:"select",rules:[{required:!0,message:"比赛地点不能为空",trigger:"blur"}],dicData:[{label:"田径场A区",value:"田径场A区"},{label:"田径场B区",value:"田径场B区"},{label:"田径场C区",value:"田径场C区"},{label:"田径场D区",value:"田径场D区"},{label:"田径场E区",value:"田径场E区"},{label:"田径场F区",value:"田径场F区"},{label:"风雨棚A区",value:"风雨棚A区"},{label:"风雨棚B区",value:"风雨棚B区"},{label:"风雨棚C区",value:"风雨棚C区"},{label:"学生活动中心A区",value:"学生活动中心A区"},{label:"学生活动中心B区",value:"学生活动中心B区"},{label:"学生活动中心C区",value:"学生活动中心C区"}]},{label:"参赛人数",prop:"competitionPe",hide:!0,rules:[{required:!0,message:"参赛人数不能为空",trigger:"blur"},{validator:function(e,t,r){if(t){if(!/^40$|^([1-3]\d)$|^\d?$/.test(t))return r(new Error("请输入正确的参赛人数"));r()}else r(new Error("请输入参赛人数"))},trigger:"blur"}]},{label:"剩余名额",prop:"competitionTnor",editDisplay:!1,addDisplay:!1}]},i=r("2CGT"),o={data:function(){return{option:a,obj:{},data:[],search:"",competition_ne:"",competition_st:"",competition_ed:"",currentPage:1,pageSize:10,total:0,dialogFormVisible:!1,formLabelWidth:"90px",vale:"",competitionOption:[],competition_site:"",formsing:{Cnumber:"",Cname:"",Cstart:"",Cend:"",Astart:"",Aend:"",Csite:"",Ctnor:""},rulesing:{Cnumber:[{required:!0,trigger:"请输入比赛编号",validator:this.nameValidator}],Cname:[{required:!0,trigger:"请输入比赛名称",validator:this.idValidator}],Cstart:[{required:!0,message:"请选择比赛开始时间",trigger:"blur"}],Cend:[{required:!0,message:"请选择比赛结束时间",trigger:"blur"}],Astart:[{required:!0,message:"请选择报名开始时间",trigger:"blur"}],Aend:[{required:!0,message:"请选择报名结束时间",trigger:"blur"}],Csite:[{required:!0,message:"请选择比赛场地",trigger:"blur"}],Ctnor:[{required:!0,message:"请输入比赛人数",trigger:"blur",validator:this.numberValidator}]}}},created:function(){this.getSite()},methods:{numberValidator:function(e,t,r){t?/^40$|^([1-3]\d)$|^\d?$/.test(t)?r():(r(new Error("号码格式错误")),console.log("号码格式错误")):r(new Error("号码不能为空"))},idValidator:function(e,t,r){t?/^[\u4e00-\u9fa50-9]{4,12}$/.test(t)?r():(r(new Error("比赛名称格式错误")),console.log("比赛名称格式错误")):r(new Error("比赛名称不能为空"))},nameValidator:function(e,t,r){t?/^glxy[0-9]\d{5}$/.test(t)?r():(r(new Error("名字格式错误")),console.log("名字格式错误")):r(new Error("名字不能为空"))},getSite:function(){var e=this;Object(i.h)().then(function(t){console.log("场地 ===》",t),e.competitionOption=t.data})},getList:function(){var e=this;Object(i.y)({params:{PageNum:this.currentPage,PageSize:this.pageSize,search:this.search}}).then(function(t){console.log("11111111"),console.log(t.data.data.records),e.data=t.data.data.records,e.total=t.data.data.total})},searchLiset:function(){var e=this;Object(i.z)({params:{PageNum:this.currentPage,PageSize:this.pageSize,competitionNe:this.competition_ne,competitionStart:this.competition_st,competitionEnd:this.competition_ed}}).then(function(t){console.log(t.data.data.records),console.log("111"),e.data=t.data.data.records,e.total=t.data.data.total})},insert:function(){var e=this;this.$refs.formsing.validate(function(t){if(!t)return console.log("信息错误"),!1;console.log("比赛表单==》",e.formsing);var r={};r.competitionNb=e.formsing.Cnumber,r.competitionNe=e.formsing.Cname,r.competitionSite=e.formsing.Csite,r.competitionPe=e.formsing.Ctnor,r.competitionStart=e.formsing.Cstart,r.competitionEnd=e.formsing.Cend,r.applyStart=e.formsing.Astart,r.applyEnd=e.formsing.Aend,Object(i.c)(r).then(function(t){e.getList(),console.log("比赛新增回调 ==》",t),"200"==t.data.code?e.$message({type:"success",message:"新增成功"}):e.$message({type:"error",message:"新增失败"}),e.dialogFormVisible=!1})})},update:function(e,t,r,a){var o=this;Object(i.i)(e).then(function(e){r(),o.getList(),console.log(e),"200"==e.data.code?o.$message({type:"success",message:"更新成功"}):o.$message({type:"error",message:"更新失败"})}).catch(function(){a()})},deletes:function(e){var t=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return console.log("比赛信息==》",e),Object(i.b)(e.competitionNb)}).then(function(e){t.getList(),"200"==e.data.code?t.$message({type:"success",message:"删除成功"}):t.$message({type:"error",message:"删除失败"}),console.log(e)})},sizeChange:function(e){this.page.pageSize=e},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()},handleRowSave:function(e,t,r){this.data.splice(0,0,e),t(),r()},handleRowUpdate:function(e,t,r,a){this.data.splice(t,1,e),r(),a()},rowDel:function(e,t){var r=this;this.$confirm("是否删除该条信息？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.data.splice(t,1)})},emptyInput:function(){this.competition_ne="",this.competition_st="",this.competition_ed=""}}},n={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ae"},[r("div",{staticStyle:{"margin-bottom":"10px"}},[r("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入比赛名称"},model:{value:e.competition_ne,callback:function(t){e.competition_ne=t},expression:"competition_ne"}}),e._v(" "),r("el-date-picker",{attrs:{placeholder:"选择开始时间",type:"datetime"},model:{value:e.competition_st,callback:function(t){e.competition_st=t},expression:"competition_st"}}),e._v(" "),r("el-date-picker",{attrs:{placeholder:"选择结束时间",type:"datetime"},model:{value:e.competition_ed,callback:function(t){e.competition_ed=t},expression:"competition_ed"}}),e._v(" "),r("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.searchLiset}}),e._v(" "),r("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.emptyInput}})],1),e._v(" "),r("basic-container",[r("avue-crud",{attrs:{data:e.data,option:e.option},on:{"on-load":e.getList,"size-change":e.sizeChange,"row-update":e.update,"row-save":e.insert,"row-del":e.deletes}},[r("template",{slot:"menuLeft"},[r("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},nativeOn:{click:function(t){e.dialogFormVisible=!0}}},[e._v("发布比赛\n        ")]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"新增比赛项目"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"formsing",attrs:{model:e.formsing,rules:e.rulesing,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"比赛编号:",prop:"Cnumber"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入比赛编号"},model:{value:e.formsing.Cnumber,callback:function(t){e.$set(e.formsing,"Cnumber",t)},expression:"formsing.Cnumber"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"比赛名称:",prop:"Cname"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入比赛名称"},model:{value:e.formsing.Cname,callback:function(t){e.$set(e.formsing,"Cname",t)},expression:"formsing.Cname"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"比赛开始时间:",prop:"Cstart"}},[r("el-date-picker",{attrs:{placeholder:"请选择 比赛开始时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formsing.Cstart,callback:function(t){e.$set(e.formsing,"Cstart",t)},expression:"formsing.Cstart"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"比赛结束时间:",prop:"Cend"}},[r("el-date-picker",{attrs:{placeholder:"请选择 比赛结束时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formsing.Cend,callback:function(t){e.$set(e.formsing,"Cend",t)},expression:"formsing.Cend"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"报名开始时间:",prop:"Astart"}},[r("el-date-picker",{attrs:{placeholder:"请选择 报名开始时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formsing.Astart,callback:function(t){e.$set(e.formsing,"Astart",t)},expression:"formsing.Astart"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"报名结束时间:",prop:"Aend"}},[r("el-date-picker",{attrs:{placeholder:"请选择 报名结束时间",type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.formsing.Aend,callback:function(t){e.$set(e.formsing,"Aend",t)},expression:"formsing.Aend"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"比赛地点:",prop:"Csite"}},[r("el-select",{attrs:{placeholder:"请选择地点"},model:{value:e.formsing.Csite,callback:function(t){e.$set(e.formsing,"Csite",t)},expression:"formsing.Csite"}},e._l(e.competitionOption,function(e){return r("el-option",{key:e.value,attrs:{label:e.competition_site,value:e.competition_site}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"参赛人数:",prop:"Ctnor"}},[r("el-input",{attrs:{autocomplete:"off",placeholder:"请输入参赛人数"},model:{value:e.formsing.Ctnor,callback:function(t){e.$set(e.formsing,"Ctnor",t)},expression:"formsing.Ctnor"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.insert("formsing")}}},[e._v("保存")])],1)],1)],1)],2)],1),e._v(" "),r("div",{staticStyle:{margin:"10px 0"}},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[5,10,20],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var l=r("VU/8")(o,n,!1,function(e){r("Y13X")},"data-v-682e7688",null);t.default=l.exports}});
//# sourceMappingURL=4.4b396f7a271e6f5d8ab2.js.map