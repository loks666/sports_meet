{"version":3,"sources":["webpack:///./src/api/Avue/Udrafted.js","webpack:///src/views/users/users_drafted/UDrafted.vue","webpack:///./src/views/users/users_drafted/UDrafted.vue?ba39","webpack:///./src/views/users/users_drafted/UDrafted.vue"],"names":["draftedAvue","border","index","indexLabel","stripe","calcHeight","searchMenuSpan","searchSpan","dialogDrag","searchBtn","viewBtn","editBtn","page","addBtn","align","menuAlign","formslot","column","label","prop","editDisabled","type","rules","required","message","trigger","dicData","value","slot","UDrafted","data","option","form","usersStnumber","usersName","collegeName","draftContent","draftState","paramsTest","search","currentPage","pageSize","total","remnant","users_ne","users_nb","college_ne","dialogFormVisible","formLabelWidth","created","this","searchLiset","getUser","methods","descInput","txtVal","length","_this","Object","api","params","window","sessionStorage","getItem","then","res","console","log","dataList","records","_this2","PageNum","PageSize","insert","_this3","code","$message","update","done","loading","_this4","UupdateAPI","catch","deletes","_this5","$confirm","confirmButtonText","cancelButtonText","draftId","emptyInput","refreshList","getList","sizeChange","handleSizeChange","handleCurrentChange","pageNum","users_drafted_UDrafted","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","size-change","row-update","row-save","row-del","refresh-change","scopedSlots","_u","key","fn","scope","active-color","active-text","active-value","disabled","inactive-color","inactive-text","inactive-value","model","row","callback","$$v","$set","expression","_v","icon","nativeOn","click","$event","staticStyle","margin","current-page","page-size","page-sizes","layout","current-change","visible","title","update:visible","ref","label-width","span","autocomplete","float","size","_s","directives","name","rawName","cols","maxlength","minlength","rows","domProps","input","target","composing","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/2.d26e0ba8fdaa2af3a666.js","sourcesContent":["// 设置手机号的验证规则\r\nconst checkPhone = (rule, value, callback) => {\r\n  if (!value) {\r\n    callback(new Error('请输入联系方式'))\r\n  } else {\r\n    const reg = /^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\\d{8}$/\r\n    if (reg.test(value)) {\r\n      callback()\r\n    } else {\r\n      return callback(new Error('请输入正确的电话'))\r\n    }\r\n  }\r\n}\r\n\r\n// 设置密码校验规则\r\nconst checkPassword = (rule, value, callback) => {\r\n  if (!value) {\r\n    callback(new Error('请输入6到12位字母或数字密码'))\r\n  } else {\r\n    // const reg = /^(20)d{12}$/;\r\n    const reg = /^(\\w){6,12}$/;\r\n    if (reg.test(value)) {\r\n      callback()\r\n    } else {\r\n      return callback(new Error('请输入正确的密码'))\r\n    }\r\n  }\r\n}\r\n\r\n//验证姓名（只能输入中文名）\r\nconst checkName = (rule, value, callback) => {\r\n  const reg = /^(?=.{2,5}$)(((?![\\u3000-\\u303F])[\\u2E80-\\uFE4F]|\\·)*(?![\\u3000-\\u303F])[\\u2E80-\\uFE4F](\\·)*)$/;\r\n  if (!reg.test(value)) {\r\n    callback(new Error('请输入2-5个汉字'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\n// 设置学号号的验证规则\r\nconst checkStnumber = (rule, value, callback) => {\r\n  if (!value) {\r\n    callback(new Error('请输入学号'))\r\n  } else {\r\n    // const reg = /^(20)d{12}$/;\r\n    const reg = /^20[0-9]\\d{9}$/;\r\n    if (reg.test(value)) {\r\n      callback()\r\n    } else {\r\n      return callback(new Error('请输入正确的学号'))\r\n    }\r\n  }\r\n}\r\n\r\nexport const draftedAvue = {\r\n\r\n  border: true,                   //显示递增id\r\n  index: true,\r\n  indexLabel: '序号',\r\n  stripe: true,\r\n  calcHeight: 30,\r\n  searchMenuSpan: 4,\r\n  // menuAlign: 'center',\r\n  searchSpan: 5,\r\n  dialogDrag: true, //表单拖拽\r\n\r\n  //表格小搜索按钮\r\n  searchBtn: false,\r\n\r\n  //操作栏查看\r\n  viewBtn: true,\r\n  //操作栏编辑\r\n  editBtn: false,\r\n\r\n\r\n  // addBtn:false,\r\n\r\n  // title:'表格的标题',\r\n  page: false,\r\n  addBtn: false,\r\n  align: 'center',\r\n  menuAlign: 'center',\r\n  formslot: true,\r\n  column: [\r\n\r\n    {\r\n      label: '姓名',\r\n      prop: 'usersName',\r\n      // search: true,\r\n      // rules: [{\r\n      //   required: true,\r\n      //   message: '姓名不能为空',\r\n      //   trigger: 'blur'\r\n      // }, {\r\n      //   validator: checkName,\r\n      //   trigger: 'blur'\r\n      // }]\r\n    },\r\n    {\r\n      label: '学号',\r\n      prop: 'usersStnumber',\r\n      editDisabled: true,   //编辑的时候不能修改\r\n      // rules: [{\r\n      //   required: true,\r\n      //   message: '学号不能为空',\r\n      //   trigger: 'blur'\r\n      // }, {\r\n      //   validator: checkStnumber,\r\n      //   trigger: 'blur'\r\n      // }]\r\n    },\r\n    {\r\n      label: '院系',\r\n      prop: 'collegeName',\r\n      type: 'select',\r\n      rules: [{\r\n        required: true,\r\n        message: '请选择院系',\r\n        trigger: 'blur'\r\n      }],\r\n      dicData: [{\r\n        label: '理工学院',\r\n        value: '理工学院'\r\n      }, {\r\n        label: '体育与健康学院',\r\n        value: '体育与健康学院'\r\n      },\r\n        {\r\n          label: '语言文学学院',\r\n          value: '语言文学学院'\r\n        },\r\n        {\r\n          label: '马克思学院',\r\n          value: '马克思学院'\r\n        },\r\n        {\r\n          label: '经济与管理学院',\r\n          value: '经济与管理学院'\r\n        },\r\n        {\r\n          label: '教育与音乐学院',\r\n          value: '教育与音乐学院'\r\n        },\r\n        {\r\n          label: '艺术与设计学院',\r\n          value: '艺术与设计学院'\r\n        },\r\n        {\r\n          label: '商贸与法律学院',\r\n          value: '商贸与法律学院'\r\n        },\r\n        {\r\n          label: '传媒学院',\r\n          value: '传媒学院'\r\n        },\r\n\r\n      ]\r\n    },\r\n    {\r\n      label: '状态',\r\n      type: \"switch\",\r\n      // type: \"radio\",\r\n      // prop: 'draftState',\r\n      slot: true,\r\n      editDisabled: true,\r\n      // form:1,\r\n      dicData: [\r\n        {\r\n          label: '未发布',\r\n          value: \"0\"\r\n        }, {\r\n          label: '已发布',\r\n          value: \"1\"\r\n        }\r\n      ],\r\n      prop: \"draftState\",\r\n    },\r\n    {\r\n      label: '内容',\r\n      prop: 'draftContent',\r\n    },\r\n  ]\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/Avue/Udrafted.js","<template>\r\n  <div class=\"as\">\r\n    <basic-container>\r\n      <avue-crud v-model=\"form\"\r\n                 :data=\"data\"\r\n                 :option=\"option\"\r\n\r\n                 @size-change=\"sizeChange\"\r\n                 @row-update=\"update\"\r\n                 @row-save=\"insert\"\r\n                 @row-del=\"deletes\"\r\n                 @refresh-change=\"refreshList\"\r\n\r\n      >\r\n\r\n        <template slot=\"draftState\" slot-scope=\"scope\">\r\n          <el-switch\r\n            v-model=scope.row.draftState\r\n            active-color=\"#409EFF\"\r\n            active-text=\"已审核\"\r\n            active-value=\"1\"\r\n            class=\"switch\"\r\n            disabled\r\n            inactive-color=\"#CCCCCC\"\r\n            inactive-text=\"未审核\"\r\n            inactive-value=\"0\"\r\n\r\n          >\r\n          </el-switch>\r\n          <!--          </el-tooltip>-->\r\n        </template>\r\n        <template slot=\"menuLeft\">\r\n          <el-button icon=\"el-icon-edit\" type=\"success\" @click.native=\"dialogFormVisible = true\">发布加油稿</el-button>\r\n        </template>\r\n        >\r\n\r\n      </avue-crud>\r\n    </basic-container>\r\n\r\n    <!--    分页-->\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n        :current-page=\"currentPage\"\r\n        :page-size=\"pageSize\"\r\n        :page-sizes=\"[5, 10, 20]\"\r\n        :total=\"total\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n\r\n    <el-dialog :visible.sync=\"dialogFormVisible\" title=\"加油稿发布\">\r\n      <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\r\n\r\n        <!--        一行-->\r\n        <el-row>\r\n\r\n          <el-col :span=\"12\">\r\n            <el-form-item :label-width=\"formLabelWidth\" label=\"姓名:\">\r\n              <el-input v-model=\"form.usersName\" :disabled=\"true\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\">\r\n            <el-form-item :label-width=\"formLabelWidth\" label=\"学号:\">\r\n              <el-input v-model=\"form.usersStnumber\" :disabled=\"true\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n        </el-row>\r\n\r\n        <!--        两行-->\r\n        <el-row>\r\n\r\n          <el-col :span=\"12\">\r\n            <el-form-item :label-width=\"formLabelWidth\" label=\"学院:\">\r\n              <el-tag size=\"medium\" style=\"float:left\">{{ form.collegeName }}</el-tag>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n          <el-col :span=\"12\">\r\n            <el-form-item :label-width=\"formLabelWidth\" label=\"状态:\" prop=\"number\">\r\n              <el-radio v-model=\"form.draftState\" disabled label=\"0\">未审核</el-radio>\r\n              <el-radio v-model=\"form.draftState\" disabled label=\"1\">已审核</el-radio>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n        </el-row>\r\n\r\n        <!--        三行-->\r\n        <el-row>\r\n\r\n          <el-col :span=\"24\">\r\n            <el-form-item :label-width=\"formLabelWidth\" label=\"内容:\">\r\n              <textarea v-model=\"form.draftContent\"\r\n                        class=\"textar\"\r\n                        cols=\"77\"\r\n                        maxlength=\"300\"\r\n                        minlength=\"3\"\r\n                        rows=\"6\"\r\n                        @input=\"descInput\">\r\n              </textarea>\r\n              <i><span>内容字数0~300字以内，剩余字数:{{ remnant }}/300</span></i>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n\r\n        </el-row>\r\n\r\n\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"insert\">发 布</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script scoped>\r\nimport {draftedAvue} from '@/api/Avue/Udrafted';\r\nimport {DdeleteAPI, DinsertAPI, DselectStateAPI, UselectByIdAPI} from '@/request/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      option: draftedAvue,\r\n      form: {\r\n        usersStnumber: '',\r\n        usersName: '',\r\n        collegeName: '',\r\n        draftContent: '',\r\n        draftState: '',\r\n      },\r\n      paramsTest: [],\r\n      data: [],\r\n      search: '',\r\n      //分页\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n\r\n      remnant: 300,\r\n      users_ne: '',\r\n      users_nb: '',\r\n      college_ne: '',\r\n      dialogFormVisible: false,\r\n      formLabelWidth: '90px',  //input边距\r\n\r\n    }\r\n  },\r\n  created() {\r\n    this.searchLiset()\r\n    this.getUser()\r\n  },\r\n  methods: {\r\n\r\n    //文本域显示字数\r\n    descInput() {\r\n      var txtVal = this.form.draftContent.length;\r\n      this.remnant = 300 - txtVal;\r\n    },\r\n\r\n//登陆用户数据渲染\r\n    getUser() {\r\n      UselectByIdAPI({\r\n        params: {\r\n          usersStnumber: window.sessionStorage.getItem('id')\r\n        }\r\n      }).then(res => {\r\n        console.log(\"顶部用户数据====》\", res)\r\n        this.dataList = res.data.data.records\r\n        this.form.usersStnumber = res.data.data.records[0].usersStnumber\r\n        this.form.usersName = res.data.data.records[0].usersName\r\n        this.form.collegeName = res.data.data.records[0].collegeName\r\n        this.form.draftState = \"0\"\r\n      })\r\n\r\n    },\r\n\r\n\r\n    //查询\r\n    searchLiset() {\r\n      DselectStateAPI({\r\n        params: {\r\n          PageNum: this.currentPage,\r\n          PageSize: this.pageSize,\r\n          usersStnumber: window.sessionStorage.getItem('id'),\r\n        }\r\n      }).then(res => {\r\n        console.log(res.data.data.records)\r\n        // console.log(res)\r\n        console.log('111')\r\n        this.data = res.data.data.records\r\n        this.total = res.data.data.total\r\n      })\r\n\r\n    },\r\n\r\n    //新增\r\n    // insert(){\r\n    //   this.paramsTest = this.form\r\n    //   if (this.form.draftState == \"0\"){\r\n    //     this.paramsTest.draftState = 0\r\n    //   }else {\r\n    //     this.paramsTest.draftState = 1\r\n    //   }\r\n    //   console.log(\"稿子==》\",this.paramsTest)\r\n    // },\r\n    insert() {\r\n      this.paramsTest = this.form\r\n      if (this.form.draftState == \"0\") {\r\n        this.paramsTest.draftState = 0\r\n      } else {\r\n        this.paramsTest.draftState = 1\r\n      }\r\n      DinsertAPI(this.paramsTest).then(res => {\r\n        // done();  // 关闭表单\r\n        // loading(); // 按钮停止加载\r\n        this.searchLiset()\r\n        if (res.data.code == '200') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"加油稿发布成功\",\r\n\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"加油稿发布失败\",\r\n\r\n          })\r\n        }\r\n        this.dialogFormVisible = false\r\n      })\r\n\r\n      // console.log(res)\r\n      console.log('999')\r\n    },\r\n\r\n    //修改\r\n    update(params, index, done, loading) {\r\n      UupdateAPI(params).then(res => {\r\n        done();\r\n        this.searchLiset()\r\n        console.log(res)\r\n        if (res.data.code == '200') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"更新成功\"\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"更新失败\"\r\n          })\r\n        }\r\n      })\r\n        .catch(() => {\r\n          loading();\r\n\r\n        })\r\n\r\n      // this.onLoad(this.page, this.query);\r\n      console.log(params)\r\n\r\n      // this.getList()\r\n    },\r\n\r\n    // 删除按钮\r\n    deletes(params) {\r\n\r\n      this.$confirm('此操作将永久删除, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        return DdeleteAPI(params.draftId)\r\n      }).then((res) => {\r\n        this.searchLiset()\r\n        // this.$message.success('删除成功')\r\n        if (res.data.code == '200') {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功\"\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"删除失败\"\r\n          })\r\n        }\r\n        console.log(res);\r\n\r\n      })\r\n\r\n    },\r\n\r\n    //清空搜索栏\r\n    emptyInput() {\r\n      this.users_ne = \"\";\r\n      this.users_nb = \"\";\r\n      this.college_ne = \"\";\r\n    },\r\n\r\n    //刷新按钮\r\n    refreshList() {\r\n      this.getList()\r\n    },\r\n\r\n    //最大条数\r\n    sizeChange(pageSize) {\r\n      this.page.pageSize = pageSize\r\n    },\r\n    //改变当前每页的个数触发\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize;\r\n      this.getList()\r\n    },\r\n    //改变当前页码触发\r\n    handleCurrentChange(pageNum) {\r\n      this.currentPage = pageNum\r\n      this.getList()\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style>\r\n.as {\r\n  /*上 右 下 左*/\r\n  padding: 10px 10px 10px 10px;\r\n  margin: 3px 0px 0px 3px;\r\n  /*box-shadow: 0 5px 15px rgba(0,0,0,.8);*/\r\n  /*background-color:#ff9900;*/\r\n  /*-moz-box-shadow: 10px 10px 5px #888888; !* 老的 Firefox *!*/\r\n  box-shadow: 0 0 5px #888888;\r\n  /*border:1px solid #fff*/\r\n  /*border:1px dashed #888888*/\r\n  /*box-shadow: 0 5px 15px*/\r\n}\r\n\r\n.textar {\r\n  border: 1px solid #6CA6CD;\r\n  font-family: \"lucida grande\", \"lucida sans unicode\", lucida, helvetica, \"Hiragino Sans GB\", \"Microsoft YaHei\", \"WenQuanYi Micro Hei\", sans-serif;\r\n  font-size: 13px;\r\n  color: #555f77;\r\n}\r\n\r\n/* switch按钮样式 */\r\n.switch .el-switch__label {\r\n  position: absolute;\r\n  display: none;\r\n  color: #fff !important;\r\n}\r\n\r\n/*打开时文字位置设置*/\r\n.switch .el-switch__label--right {\r\n  z-index: 1;\r\n}\r\n\r\n/* 调整打开时文字的显示位子 */\r\n.switch .el-switch__label--right span {\r\n  margin-right: 9px;\r\n}\r\n\r\n/*关闭时文字位置设置*/\r\n.switch .el-switch__label--left {\r\n  z-index: 1;\r\n}\r\n\r\n/* 调整关闭时文字的显示位子 */\r\n.switch .el-switch__label--left span {\r\n  margin-left: 9px;\r\n}\r\n\r\n/*显示文字*/\r\n.switch .el-switch__label.is-active {\r\n  display: block;\r\n}\r\n\r\n/* 调整按钮的宽度 */\r\n.switch.el-switch .el-switch__core,\r\n.el-switch .el-switch__label {\r\n  width: 68px !important;\r\n  margin: 0;\r\n}\r\n\r\n\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/users/users_drafted/UDrafted.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"as\"},[_c('basic-container',[_c('avue-crud',{attrs:{\"data\":_vm.data,\"option\":_vm.option},on:{\"size-change\":_vm.sizeChange,\"row-update\":_vm.update,\"row-save\":_vm.insert,\"row-del\":_vm.deletes,\"refresh-change\":_vm.refreshList},scopedSlots:_vm._u([{key:\"draftState\",fn:function(scope){return [_c('el-switch',{staticClass:\"switch\",attrs:{\"active-color\":\"#409EFF\",\"active-text\":\"已审核\",\"active-value\":\"1\",\"disabled\":\"\",\"inactive-color\":\"#CCCCCC\",\"inactive-text\":\"未审核\",\"inactive-value\":\"0\"},model:{value:(scope.row.draftState),callback:function ($$v) {_vm.$set(scope.row, \"draftState\", $$v)},expression:\"scope.row.draftState\"}})]}}]),model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}},[_vm._v(\" \"),_c('template',{slot:\"menuLeft\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-edit\",\"type\":\"success\"},nativeOn:{\"click\":function($event){_vm.dialogFormVisible = true}}},[_vm._v(\"发布加油稿\")])],1),_vm._v(\"\\n      >\\n\\n    \")],2)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"10px 0\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"page-sizes\":[5, 10, 20],\"total\":_vm.total,\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.dialogFormVisible,\"title\":\"加油稿发布\"},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"100px\"}},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label-width\":_vm.formLabelWidth,\"label\":\"姓名:\"}},[_c('el-input',{attrs:{\"disabled\":true,\"autocomplete\":\"off\"},model:{value:(_vm.form.usersName),callback:function ($$v) {_vm.$set(_vm.form, \"usersName\", $$v)},expression:\"form.usersName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label-width\":_vm.formLabelWidth,\"label\":\"学号:\"}},[_c('el-input',{attrs:{\"disabled\":true,\"autocomplete\":\"off\"},model:{value:(_vm.form.usersStnumber),callback:function ($$v) {_vm.$set(_vm.form, \"usersStnumber\", $$v)},expression:\"form.usersStnumber\"}})],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label-width\":_vm.formLabelWidth,\"label\":\"学院:\"}},[_c('el-tag',{staticStyle:{\"float\":\"left\"},attrs:{\"size\":\"medium\"}},[_vm._v(_vm._s(_vm.form.collegeName))])],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"label-width\":_vm.formLabelWidth,\"label\":\"状态:\",\"prop\":\"number\"}},[_c('el-radio',{attrs:{\"disabled\":\"\",\"label\":\"0\"},model:{value:(_vm.form.draftState),callback:function ($$v) {_vm.$set(_vm.form, \"draftState\", $$v)},expression:\"form.draftState\"}},[_vm._v(\"未审核\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"disabled\":\"\",\"label\":\"1\"},model:{value:(_vm.form.draftState),callback:function ($$v) {_vm.$set(_vm.form, \"draftState\", $$v)},expression:\"form.draftState\"}},[_vm._v(\"已审核\")])],1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"label-width\":_vm.formLabelWidth,\"label\":\"内容:\"}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.draftContent),expression:\"form.draftContent\"}],staticClass:\"textar\",attrs:{\"cols\":\"77\",\"maxlength\":\"300\",\"minlength\":\"3\",\"rows\":\"6\"},domProps:{\"value\":(_vm.form.draftContent)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"draftContent\", $event.target.value)},_vm.descInput]}}),_vm._v(\" \"),_c('i',[_c('span',[_vm._v(\"内容字数0~300字以内，剩余字数:\"+_vm._s(_vm.remnant)+\"/300\")])])])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.insert}},[_vm._v(\"发 布\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bf20c824\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/users/users_drafted/UDrafted.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bf20c824\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UDrafted.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UDrafted.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UDrafted.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bf20c824\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UDrafted.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/users/users_drafted/UDrafted.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}