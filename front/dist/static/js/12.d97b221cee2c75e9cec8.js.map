{"version":3,"sources":["webpack:///./src/api/Avue/Ustudent.js","webpack:///src/views/users/users_student/UStudent.vue","webpack:///./src/views/users/users_student/UStudent.vue?ad65","webpack:///./src/views/users/users_student/UStudent.vue"],"names":["studentAvue","border","index","indexLabel","stripe","calcHeight","searchMenuSpan","searchSpan","searchShowBtn","dialogDrag","page","addBtn","align","menuAlign","editBtn","delBtnText","formslot","column","label","prop","hide","editDisabled","rules","required","message","trigger","type","format","valueFormat","UStudent","data","option","form","search","currentPage","pageSize","total","time","state","usersStnumber","competitionNb","created","this","getList","getDate","methods","_this","Object","api","params","PageNum","PageSize","window","sessionStorage","getItem","then","res","console","log","records","deletes","_this2","$confirm","distinguishCancelAndClose","confirmButtonText","cancelButtonText","code","$message","catch","action","myDate","Date","year","getFullYear","month","getMonth","date","h","getHours","m","getMinutes","s","getSeconds","convert","val","emptyInput","users_ne","users_nb","college_ne","refreshList","sizeChange","handleSizeChange","handleCurrentChange","pageNum","users_student_UStudent","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","on-load","size-change","row-del","refresh-change","scopedSlots","_u","key","fn","scope","row","competitionEnd","_v","_s","model","value","callback","$$v","expression","staticStyle","margin","current-page","page-size","page-sizes","layout","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.d97b221cee2c75e9cec8.js","sourcesContent":["export const studentAvue = {\r\n\r\n  border: true,                   //显示递增id\r\n  index: true,\r\n  indexLabel: '序号',\r\n  stripe: true,\r\n  calcHeight: 30,\r\n  searchMenuSpan: 4,\r\n  // menuAlign: 'center',\r\n  searchSpan: 5,\r\n  searchShowBtn: false,     //控制搜索折叠的按钮\r\n  // selection:true,  //开启多选功能\r\n  dialogDrag: true, //表单拖拽\r\n  // emptyText: '暂无报名项目',\r\n\r\n  // title:'表格的标题',\r\n  page: false,\r\n  addBtn: false,\r\n  align: 'center',\r\n  menuAlign: 'center',\r\n  editBtn: false,\r\n  delBtnText: '取消报名',\r\n  formslot: true,\r\n  column: [\r\n\r\n    {\r\n      label: '报名学号',\r\n      prop: 'usersStnumber',\r\n      hide: true,   //表单查询是否显示\r\n    },\r\n    {\r\n      label: '比赛编号',\r\n      prop: 'competitionNb',\r\n      hide: true,   //表单查询是否显示\r\n      editDisabled: true,   //编辑的时候不能修改\r\n      rules: [{\r\n        required: true,\r\n        message: '比赛编号不能为空',\r\n        trigger: 'blur'\r\n      },]\r\n    },\r\n    {\r\n      label: '比赛名称',\r\n      prop: 'competitionNe',\r\n      rules: [{\r\n        required: true,\r\n        message: '比赛名称不能为空',\r\n        trigger: 'blur'\r\n      },],\r\n      // search: true,   //搜索栏\r\n\r\n      //开启自定义搜索\r\n      // searchslot:true,\r\n      // search:true,\r\n    },\r\n    {\r\n      label: '比赛开始时间',\r\n      prop: 'competitionStart',\r\n      type: \"datetime\",\r\n      // search: true,\r\n      format: \"yyyy-MM-dd hh:mm:ss\",\r\n      valueFormat: \"yyyy-MM-dd hh:mm:ss\",\r\n      rules: [{\r\n        required: true,\r\n        message: '比赛开始时间不能为空',\r\n        trigger: 'blur'\r\n      }]\r\n    }, {\r\n      label: \"比赛结束时间\",\r\n      prop: \"competitionEnd\",\r\n      type: \"datetime\",\r\n      // search: true,\r\n      format: \"yyyy-MM-dd hh:mm:ss\",\r\n      valueFormat: \"yyyy-MM-dd hh:mm:ss\",\r\n      rules: [{\r\n        required: true,\r\n        message: '比赛结束时间不能为空',\r\n        trigger: 'blur'\r\n      }]\r\n    },\r\n\r\n    {\r\n      label: '状态',\r\n      prop: 'state',\r\n      type: '',\r\n    },\r\n\r\n    {\r\n      label: '比赛地点',\r\n      prop: 'competitionSite',\r\n      type: 'select',\r\n      rules: [{\r\n        required: true,\r\n        message: '比赛地点不能为空',\r\n        trigger: 'blur'\r\n      }],\r\n    },\r\n\r\n\r\n  ]\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/Avue/Ustudent.js","<template>\r\n  <div class=\"as\">\r\n\r\n    <basic-container>\r\n      <avue-crud v-model=\"form\"\r\n                 :data=\"data\"\r\n                 :option=\"option\"\r\n                 @on-load=\"getList\"\r\n                 @size-change=\"sizeChange\"\r\n                 @row-del=\"deletes\"\r\n                 @refresh-change=\"refreshList\"\r\n      >\r\n\r\n        <template slot=\"state\" slot-scope=\"scope\">\r\n          <el-tag\r\n\r\n            :type=\" scope.row.competitionEnd < time ?'danger':'info'\"\r\n          >\r\n            <!--            {{ scope.row.competitionEnd == }}-->\r\n            {{ scope.row.competitionEnd < time ? \"已结束\" : \"未开始\" }}\r\n\r\n          </el-tag>\r\n          <!--          </el-tooltip>-->\r\n        </template>\r\n\r\n      </avue-crud>\r\n    </basic-container>\r\n\r\n    <!--    分页-->\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n        :current-page=\"currentPage\"\r\n        :page-size=\"pageSize\"\r\n        :page-sizes=\"[5, 10, 20]\"\r\n        :total=\"total\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script scoped>\r\nimport {studentAvue} from '@/api/Avue/Ustudent';\r\nimport {seleteStudentAPI, studentDeleteAPI} from '@/request/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      option: studentAvue,\r\n      form: {},\r\n      data: [],\r\n      search: '',\r\n      message: \"success\",\r\n      //分页\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      time: '',\r\n      state: '',\r\n\r\n      usersStnumber: '',\r\n      competitionNb: ''\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n    this.getDate()\r\n  },\r\n  methods: {\r\n\r\n    //分页请求\r\n    getList() {\r\n      seleteStudentAPI({\r\n        params: {\r\n          PageNum: this.currentPage,\r\n          PageSize: this.pageSize,\r\n          search: this.search,\r\n          usersStnumber: window.sessionStorage.getItem('id'),\r\n\r\n        }\r\n      }).then(res => {\r\n        console.log(\"用户报名列表===》\", res.data.data.records)\r\n        console.log(this.time)\r\n        this.data = res.data.data.records\r\n        this.total = res.data.data.total\r\n\r\n        // let date1 = new Date(this.time)\r\n        // let time1 = date1.getTime();\r\n        // console.log(time1)\r\n\r\n        // for (let i = 0; i < res.data.data.records.length; i++) {\r\n        //   // this.state = ''\r\n        //   let date2 = new Date(res.data.data.records[i].competitionEnd)\r\n        //   let time2 = date2.getTime();\r\n        //   console.log(\"时间\", time2)\r\n        //\r\n        //   if (time1 < time2) {\r\n        //     console.log(\"比较\")\r\n        //\r\n        //     // this.state = '已结束'\r\n        //   }\r\n        //   else {\r\n        //     console.log(\"比较2\")\r\n        //     this.state = '未开始'\r\n        //   }\r\n        //   // if (date2 <date1){\r\n        //   //   this.state = '已结束'\r\n        //   // }\r\n        //   // if (res.data.data.records[i].competitionEnd.getTime()>this.time.getTime()){\r\n        //\r\n        // }\r\n\r\n      })\r\n\r\n    },\r\n\r\n    // 取消报名\r\n    deletes(params) {\r\n\r\n      this.$confirm('确定要取消参加该比赛？', '确认信息', {\r\n        distinguishCancelAndClose: true,\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消'\r\n      })\r\n        .then(() => {\r\n\r\n          studentDeleteAPI({\r\n            params: {\r\n              usersStnumber: window.sessionStorage.getItem('id'),\r\n              competitionNb: params.competitionNb,\r\n            }\r\n          }).then(res => {\r\n            console.log(\"删除回调===>\", res)\r\n            if (res.data.code == \"200\") {\r\n              this.$message({\r\n                type: 'success',\r\n                message: '取消报名成功'\r\n              });\r\n            } else {\r\n              this.$message({\r\n                type: 'error',\r\n                message: '取消报名失败，已超过报名时间'\r\n              });\r\n            }\r\n            this.getList()\r\n          })\r\n\r\n        })\r\n        .catch(action => {\r\n          this.$message({\r\n            type: 'error',\r\n            message: action === 'cancel'\r\n              ? '已放弃取消报名该比赛项目'\r\n              : '已提取消报名比赛'\r\n          })\r\n        });\r\n    },\r\n\r\n    getDate() {\r\n      const myDate = new Date()\r\n      //获取当前年\r\n      const year = myDate.getFullYear()\r\n      //获取当前月\r\n      const month = myDate.getMonth() + 1\r\n      //获取当前日\r\n      const date = myDate.getDate()\r\n      //获取当前小时数(0-23)\r\n      const h = myDate.getHours()\r\n      //获取当前分钟数(0-59)\r\n      const m = myDate.getMinutes()\r\n      const s = myDate.getSeconds()\r\n\r\n      //获取当前时间\r\n      this.time =\r\n        year +\r\n        '-' +\r\n        this.convert(month) +\r\n        '-' +\r\n        this.convert(date) +\r\n        ' ' +\r\n        this.convert(h) +\r\n        ':' +\r\n        this.convert(m) +\r\n        ':' +\r\n        this.convert(s)\r\n\r\n      console.log(\"当前时间\", this.time)\r\n    },\r\n\r\n    //日期时间处理\r\n    convert(val) {\r\n      return val < 10 ? '0' + val : val\r\n    },\r\n\r\n    //清空搜索栏\r\n    emptyInput() {\r\n      this.users_ne = \"\";\r\n      this.users_nb = \"\";\r\n      this.college_ne = \"\";\r\n    },\r\n\r\n    //刷新按钮\r\n    refreshList() {\r\n      this.getList()\r\n    },\r\n\r\n    //最大条数\r\n    sizeChange(pageSize) {\r\n      this.page.pageSize = pageSize\r\n    },\r\n    //改变当前每页的个数触发\r\n    handleSizeChange(pageSize) {\r\n      this.pageSize = pageSize;\r\n      this.getList()\r\n    },\r\n    //改变当前页码触发\r\n    handleCurrentChange(pageNum) {\r\n      this.currentPage = pageNum\r\n      this.getList()\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n/*body{*/\r\n/*  !*padding: 25px 50px 75px 100px;*!*/\r\n/*  !*margin :auto 100px;*!*/\r\n/*}*/\r\n.as {\r\n  /*上 右 下 左*/\r\n  padding: 10px 10px 10px 10px;\r\n  margin: 3px 0px 0px 3px;\r\n  /*box-shadow: 0 5px 15px rgba(0,0,0,.8);*/\r\n  /*background-color:#ff9900;*/\r\n  /*-moz-box-shadow: 10px 10px 5px #888888; !* 老的 Firefox *!*/\r\n  box-shadow: 0 0 5px #888888;\r\n  /*border:1px solid #fff*/\r\n  /*border:1px dashed #888888*/\r\n  /*box-shadow: 0 5px 15px*/\r\n}\r\n\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/users/users_student/UStudent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"as\"},[_c('basic-container',[_c('avue-crud',{attrs:{\"data\":_vm.data,\"option\":_vm.option},on:{\"on-load\":_vm.getList,\"size-change\":_vm.sizeChange,\"row-del\":_vm.deletes,\"refresh-change\":_vm.refreshList},scopedSlots:_vm._u([{key:\"state\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.competitionEnd < _vm.time ?'danger':'info'}},[_vm._v(\"\\n          \"+_vm._s(scope.row.competitionEnd < _vm.time ? \"已结束\" : \"未开始\")+\"\\n\\n        \")])]}}]),model:{value:(_vm.form),callback:function ($$v) {_vm.form=$$v},expression:\"form\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin\":\"10px 0\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":_vm.pageSize,\"page-sizes\":[5, 10, 20],\"total\":_vm.total,\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1d37370c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/users/users_student/UStudent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1d37370c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UStudent.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UStudent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./UStudent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1d37370c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./UStudent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1d37370c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/users/users_student/UStudent.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}