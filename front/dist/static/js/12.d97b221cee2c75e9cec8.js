webpackJsonp([12],{XWeK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={border:!0,index:!0,indexLabel:"序号",stripe:!0,calcHeight:30,searchMenuSpan:4,searchSpan:5,searchShowBtn:!1,dialogDrag:!0,page:!1,addBtn:!1,align:"center",menuAlign:"center",editBtn:!1,delBtnText:"取消报名",formslot:!0,column:[{label:"报名学号",prop:"usersStnumber",hide:!0},{label:"比赛编号",prop:"competitionNb",hide:!0,editDisabled:!0,rules:[{required:!0,message:"比赛编号不能为空",trigger:"blur"}]},{label:"比赛名称",prop:"competitionNe",rules:[{required:!0,message:"比赛名称不能为空",trigger:"blur"}]},{label:"比赛开始时间",prop:"competitionStart",type:"datetime",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"比赛开始时间不能为空",trigger:"blur"}]},{label:"比赛结束时间",prop:"competitionEnd",type:"datetime",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"比赛结束时间不能为空",trigger:"blur"}]},{label:"状态",prop:"state",type:""},{label:"比赛地点",prop:"competitionSite",type:"select",rules:[{required:!0,message:"比赛地点不能为空",trigger:"blur"}]}]},a=n("2CGT"),r={data:function(){return{option:s,form:{},data:[],search:"",message:"success",currentPage:1,pageSize:10,total:0,time:"",state:"",usersStnumber:"",competitionNb:""}},created:function(){this.getList(),this.getDate()},methods:{getList:function(){var e=this;Object(a.T)({params:{PageNum:this.currentPage,PageSize:this.pageSize,search:this.search,usersStnumber:window.sessionStorage.getItem("id")}}).then(function(t){console.log("用户报名列表===》",t.data.data.records),console.log(e.time),e.data=t.data.data.records,e.total=t.data.data.total})},deletes:function(e){var t=this;this.$confirm("确定要取消参加该比赛？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){Object(a.U)({params:{usersStnumber:window.sessionStorage.getItem("id"),competitionNb:e.competitionNb}}).then(function(e){console.log("删除回调===>",e),"200"==e.data.code?t.$message({type:"success",message:"取消报名成功"}):t.$message({type:"error",message:"取消报名失败，已超过报名时间"}),t.getList()})}).catch(function(e){t.$message({type:"error",message:"cancel"===e?"已放弃取消报名该比赛项目":"已提取消报名比赛"})})},getDate:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),a=e.getHours(),r=e.getMinutes(),i=e.getSeconds();this.time=t+"-"+this.convert(n)+"-"+this.convert(s)+" "+this.convert(a)+":"+this.convert(r)+":"+this.convert(i),console.log("当前时间",this.time)},convert:function(e){return e<10?"0"+e:e},emptyInput:function(){this.users_ne="",this.users_nb="",this.college_ne=""},refreshList:function(){this.getList()},sizeChange:function(e){this.page.pageSize=e},handleSizeChange:function(e){this.pageSize=e,this.getList()},handleCurrentChange:function(e){this.currentPage=e,this.getList()}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"as"},[n("basic-container",[n("avue-crud",{attrs:{data:e.data,option:e.option},on:{"on-load":e.getList,"size-change":e.sizeChange,"row-del":e.deletes,"refresh-change":e.refreshList},scopedSlots:e._u([{key:"state",fn:function(t){return[n("el-tag",{attrs:{type:t.row.competitionEnd<e.time?"danger":"info"}},[e._v("\n          "+e._s(t.row.competitionEnd<e.time?"已结束":"未开始")+"\n\n        ")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),e._v(" "),n("div",{staticStyle:{margin:"10px 0"}},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[5,10,20],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=n("VU/8")(r,i,!1,function(e){n("p3ka")},"data-v-1d37370c",null);t.default=o.exports},p3ka:function(e,t){}});
//# sourceMappingURL=12.d97b221cee2c75e9cec8.js.map