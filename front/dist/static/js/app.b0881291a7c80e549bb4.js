webpackJsonp([16],{"294j":function(e,t){},"2CGT":function(e,t,n){"use strict";var r=n("//Fk"),o=n.n(r),i=n("mtWM"),s=this,a=n.n(i).a.create({baseURL:"http://localhost:9090",timeout:5e3});a.interceptors.request.use(function(e){return e.headers.token=window.sessionStorage.getItem("token"),e},function(e){return o.a.reject(e)}),a.interceptors.response.use(function(e){return e},function(e){return window.sessionStorage.clear(),window.location.hash="#/login",s.$message.error("账号访问异常"),o.a.reject(e)});var u=a;n.d(t,"x",function(){return l}),n.d(t,"N",function(){return c}),n.d(t,"w",function(){return d}),n.d(t,"H",function(){return m}),n.d(t,"K",function(){return f}),n.d(t,"S",function(){return p}),n.d(t,"R",function(){return g}),n.d(t,"V",function(){return h}),n.d(t,"P",function(){return v}),n.d(t,"M",function(){return b}),t.q=function(e){return u({url:"/usersNum/selectSex",method:"get",params:e})},t.p=function(e){return u({url:"/echarts/getList",method:"get",params:e})},t.o=function(e){return u({url:"/echarts/getList2",method:"get",params:e})},t.r=function(e){return u({url:"/ranking/selectRanking",method:"get",params:e})},t.s=function(e){return u({url:"/usersSort/selectSum",method:"get",params:e})},t.J=function(e){return u({url:"/usersSex/All",method:"get",params:e})},n.d(t,"I",function(){return _}),n.d(t,"O",function(){return w}),n.d(t,"Q",function(){return x}),n.d(t,"L",function(){return S}),n.d(t,"F",function(){return y}),n.d(t,"G",function(){return k}),n.d(t,"y",function(){return C}),n.d(t,"z",function(){return U}),n.d(t,"c",function(){return $}),n.d(t,"i",function(){return V}),n.d(t,"b",function(){return E}),n.d(t,"h",function(){return A}),n.d(t,"a",function(){return L}),n.d(t,"T",function(){return F}),n.d(t,"U",function(){return I}),n.d(t,"t",function(){return N}),n.d(t,"u",function(){return O}),n.d(t,"v",function(){return P}),n.d(t,"e",function(){return R}),n.d(t,"f",function(){return W}),n.d(t,"g",function(){return j}),n.d(t,"d",function(){return z}),n.d(t,"B",function(){return D}),n.d(t,"C",function(){return M}),n.d(t,"D",function(){return q}),n.d(t,"A",function(){return B}),n.d(t,"k",function(){return T}),n.d(t,"m",function(){return X}),t.n=function(e,t){return u({url:"/draft/updateState",params:{draftId:e,draftState:t},method:"get"})},t.j=function(e){return u({url:"/draft/delete",params:{draftId:e},method:"delete"})},n.d(t,"l",function(){return H}),n.d(t,"E",function(){return G});var l=function(e){return u.get("/login/doLogin",e)},c=function(e){return u.get("college/selectCollegeName",e)},d=function(e){return u.get("role/selectValue",e)},m=function(e){return u.get("/authCode/getEmail",e)},f=function(e){return u.get("/authCode/updatePwd",e)},p=function(e){return u.get("/role/search",e)},g=function(e){return u.get("/role/deleteBy",e)},h=function(e){return u.get("/role/updateBy",e)},v=function(e){return u.get("/users/selectBySn",e)},b=function(e){return u.get("/users/updateUsersPwd",e)};var _=function(e){return u.get("/users/search",e)},w=function(e){return u.get("/users/selectBySn",e)},x=function(e){return u({url:"/users/updateUsers",method:"put",params:e})},S=function(e){return u.post("/users/insertUsers",e)},y=function(e){return u.delete("/users/deleteUsers",{params:{usersStnumber:e}})},k=function(e){return u.delete("/users/deleteUsers",e)},C=function(e){return u.get("/competition/search",e)},U=function(e){return u.get("/competition/selectByNb",e)},$=function(e){return u.post("/competition/insertCompetition",e)},V=function(e){return u({url:"/competition/updateScore",method:"put",params:e})},E=function(e){return u.delete("/competition/deleteCompetition",{params:{competitionNb:e}})},A=function(e){return u.get("/site/selectSite",e)},L=function(e){return u.get("/competition/updateCompetition",e)},F=function(e){return u.get("/enroll/selectBySber",e)},I=function(e){return u.get("/applicationfrom/cancel",e)},N=function(e){return u.get("/enroll/selectEnAll",e)},O=function(e){return u.get("enroll/getlist",e)},P=function(e){return u({url:"/enroll/updateCompetition",method:"put",params:e})},R=function(e){return u.get("/college/search",e)},W=function(e){return u({url:"/college/insertCollege",method:"post",params:e})},j=function(e){return u({url:"/college/updateCollege",method:"put",params:e})},z=function(e){return u.get("/college/deleteCollege",e)},D=function(e){return u.get("/site/search",e)},M=function(e){return u({url:"/site/insertSite",method:"post",params:e})},q=function(e){return u({url:"/site/updateSite",method:"put",params:e})},B=function(e){return u.delete("/site/deleteSite",{params:{siteId:e}})},T=function(e){return u.get("/draft/search",e)},X=function(e){return u.get("/draft/selectBySm",e)};var H=function(e){return u.post("/draft/insertDraft",e)},G=function(e){return u.get("/draft/selectImgUrl",e)}},"DXw/":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},o,!1,function(e){n("b0Or")},null,null).exports,s=n("/ocq"),a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("找不到该页面...")])])}]};var u=n("VU/8")({name:"NotFound"},a,!1,function(e){n("DXw/")},null,null).exports,l=n("2CGT"),c=n("NC6I"),d=n.n(c),m={name:"Header",data:function(){return{usersStnumber:"",data:[],dataList:[],img:"http://localhost:9090/image/",user:{},uploadData:"",stnumber:"",token:{token:window.sessionStorage.getItem("token")},dialogFormVisible:!1,form:{id:"",name:"",sex:"",number:"",college:"",password:"",email:""},rules:{password:[{required:!0,trigger:"blur",validator:this.passwordValidator},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}],number:[{required:!0,trigger:"blur",validator:this.numberValidator}],email:[{required:!0,trigger:"blur",validator:this.emailValidator}]},formLabelWidth:"90px",vale:""}},created:function(){this.getUser();var e=sessionStorage.getItem("user")||"{}";this.user=JSON.parse(e),this.uploadData=window.sessionStorage.getItem("id");window.sessionStorage.getItem("id")},methods:{passwordValidator:function(e,t,n){t?/^[a-zA-Z0-9_]{1,30}$/.test(t)?n():(n(new Error("密码只能是数字、下划线、字母!")),console.log("密码只能是数字、下划线、字母!")):n(new Error("密码不能为空"))},numberValidator:function(e,t,n){t?/^[1][3,4,5,7,8][0-9]{9}$/.test(t)?n():(n(new Error("号码格式错误")),console.log("号码格式错误")):n(new Error("号码不能为空"))},emailValidator:function(e,t,n){t?/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(t)?n():(n(new Error("邮箱格式错误")),console.log("邮箱格式错误")):n(new Error("邮箱不能为空，重置密码必需"))},loginOut:function(){window.sessionStorage.removeItem("token"),window.sessionStorage.clear(),this.$message({message:"退出系统",type:"success"}),this.$router.push("/login")},getUser:function(){var e=this;Object(l.P)({params:{usersStnumber:window.sessionStorage.getItem("id")}}).then(function(t){console.log("顶部用户数据====》",t),e.dataList=t.data.data.records,e.form.id=t.data.data.records[0].usersStnumber,e.form.name=t.data.data.records[0].usersName,e.form.number=t.data.data.records[0].usersPhone,e.form.college=t.data.data.records[0].collegeName,e.form.email=t.data.data.records[0].usersEmail,e.form.password=window.sessionStorage.getItem("upd"),0===t.data.data.records[0].usersSex?(e.form.sex="男",e.vale="warning"):(e.form.sex="女",e.vale="danger")})},handleVideoSuccess:function(e,t){200==e.code?this.$message({showClose:!0,message:"更改头像成功",type:"success"}):this.$message({showClose:!0,message:"更改头像失败",type:"error"}),this.getUser(),console.log("成功回调",e)},beforeUploadVideo:function(e){var t=e.size/1024/1024<5;return-1==["image/png","image/jpg","image/jpeg"].indexOf(e.type)?(this.$message.error("请上传正确的图片格式"),!1):!!t||(this.$message.error("图片大小不能超过5MB"),!1)},updateUsers:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return console.log("信息错误"),!1;console.log("id",e.form.id),console.log("id",e.form.number),console.log("id",e.form.password),console.log("email",e.form.email),Object(l.M)({params:{usersStnumber:e.form.id,usersPhone:e.form.number,usersPwd:d()(e.form.password),usersEmail:e.form.email}}).then(function(t){console.log("用户修改信息回调===》",t),"200"===t.data.code?(e.dialogFormVisible=!1,e.$message({message:"用户信息修改成功",type:"success"})):e.$message({message:"用户信息修改失败",type:"error"})})})}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"50px","line-height":"50px","border-bottom":"1px solid #ccc",display:"flex",background:"linear-gradient(to bottom,#87CEFA,#b6fbff)"}},[n("div",{staticStyle:{width:"200px","padding-left":"30px","font-weight":"bold",color:"dodgerblue"}},[e._v("运动会报名系统")]),e._v(" "),n("div",{staticStyle:{flex:"1"}}),e._v(" "),n("div",{staticStyle:{width:"100px"}},e._l(e.dataList,function(t,r){return n("el-dropdown",{key:r,scopedSlots:e._u([{key:"dropdown",fn:function(){return[n("el-dropdown-menu",[n("el-dropdown-item",{nativeOn:{click:function(t){e.dialogFormVisible=!0}}},[e._v("个人信息")]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(t){return e.loginOut.apply(null,arguments)}}},[e._v("退出系统")])],1)]},proxy:!0}],null,!0)},[n("span",{staticClass:"el-link",staticStyle:{color:"#409EFF"}},[n("div",{staticClass:"imgdiv"},[n("img",{staticClass:"img",attrs:{src:e.img+t.usersUrl,alt:""}})]),e._v(" "),n("div",{staticStyle:{width:"40px",height:"40px"}},[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})])])])}),1),e._v(" "),n("el-dialog",{attrs:{visible:e.dialogFormVisible,title:"个人信息"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-upload",{attrs:{"before-upload":e.beforeUploadVideo,data:{usersStnumber:this.uploadData},headers:e.token,"on-success":function(t,n){return e.handleVideoSuccess(t,n)},"show-file-list":!1,action:"http://localhost:9090/users/uploadImg"}},[n("div",[e._v("上传头像")])]),e._v(" "),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"学号:"}},[n("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"姓名:"}},[n("el-input",{attrs:{disabled:!0,autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"性别:"}},[n("el-tag",{staticStyle:{float:"left"},attrs:{type:e.vale,effect:"dark",size:"medium"}},[e._v(e._s(e.form.sex))])],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"号码:",prop:"number"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",e._n(t))},expression:"form.number"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"学院:"}},[n("el-tag",{staticStyle:{float:"left"},attrs:{size:"medium"}},[e._v(e._s(e.form.college))])],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"密码:",prop:"password"}},[n("el-input",{attrs:{placeholder:"请输入密码",required:"","show-word-limit":"",type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"邮箱:",prop:"email"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.updateUsers("form")}}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var p={name:"Aside",data:function(){return{user:{},path:this.$route.path,role:""}},created:function(){this.getRole()},methods:{getRole:function(){var e=this;Object(l.w)({params:{usersStnumber:window.sessionStorage.getItem("id")}}).then(function(t){e.role=t.data.data,console.log("角色回调role==》",e.role)})}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{width:"200px","min-height":"calc(100vh - 50px)"},attrs:{"default-active":e.path,router:""}},[n("el-menu-item",{attrs:{index:"/echartsPage"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("报名详情")]},proxy:!0}])},[n("i",{staticClass:"el-icon-s-opportunity"})]),e._v(" "),"superAdmin"===this.role?n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-order"}),e._v(" "),n("span",[e._v("权限管理")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/superAdmin"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("权限管理")]},proxy:!0}],null,!1,3776168841)})],2):e._e(),e._v(" "),"admin"===this.role||"superAdmin"===this.role?n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-order"}),e._v(" "),n("span",[e._v("用户管理")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/index"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("用户管理")]},proxy:!0}],null,!1,2045623525)})],2):e._e(),e._v(" "),"admin"===this.role||"superAdmin"===this.role?n("el-submenu",{attrs:{index:"3"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-order"}),e._v(" "),n("span",[e._v("比赛管理")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/manage"}},[e._v("比赛项目管理")]),e._v(" "),n("el-menu-item",{attrs:{index:"/enroll"}},[e._v("比赛报名管理")]),e._v(" "),n("el-menu-item",{attrs:{index:"/site"}},[e._v("比赛场地管理")])],2):e._e(),e._v(" "),"admin"===this.role||"superAdmin"===this.role?n("el-submenu",{attrs:{index:"4"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-order"}),e._v(" "),n("span",[e._v("学院管理")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/college"}},[e._v("学院管理")])],2):e._e(),e._v(" "),"admin"===this.role||"superAdmin"===this.role?n("el-submenu",{attrs:{index:"5"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-s-order"}),e._v(" "),n("span",[e._v("加油稿管理")])]),e._v(" "),n("el-menu-item",{attrs:{index:"/draft"}},[e._v("加油稿管理")])],2):e._e(),e._v(" "),n("el-menu-item",{attrs:{index:"/uManage"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("比赛报名")]},proxy:!0}])},[n("i",{staticClass:"el-icon-circle-plus"})]),e._v(" "),n("el-menu-item",{attrs:{index:"/college_integrate"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("学院积分排行")]},proxy:!0}])},[n("i",{staticClass:"el-icon-s-data"})]),e._v(" "),n("el-menu-item",{attrs:{index:"/uStudent"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("个人参赛项目")]},proxy:!0}])},[n("i",{staticClass:"el-icon-user"})]),e._v(" "),n("el-menu-item",{attrs:{index:"/udrafted"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("发布加油稿")]},proxy:!0}])},[n("i",{staticClass:"el-icon-s-promotion"})]),e._v(" "),n("el-menu-item",{attrs:{index:"/udraft"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("加油稿展示")]},proxy:!0}])},[n("i",{staticClass:"el-icon-share"})])],1)],1)},staticRenderFns:[]};var h={name:"Layout",components:{Header:n("VU/8")(m,f,!1,function(e){n("Nj+P")},"data-v-62295569",null).exports,Aside:n("VU/8")(p,g,!1,function(e){n("UuT6")},"data-v-291f5644",null).exports}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Header"),this._v(" "),t("div",{staticStyle:{display:"flex"}},[t("Aside"),this._v(" "),t("router-view",{staticStyle:{flex:"1"}})],1)],1)},staticRenderFns:[]};var b=n("VU/8")(h,v,!1,function(e){n("294j")},"data-v-c24604d2",null).exports;r.default.use(s.a);var _=new s.a({routes:[{path:"/",name:"Layout",component:b,redirect:"/login",children:[{path:"echartsPage",name:"EchartsPage",component:function(){return n.e(11).then(n.bind(null,"thTJ"))}},{path:"superAdmin",name:"SuperAdmin",component:function(){return n.e(1).then(n.bind(null,"0Tb2"))}},{path:"index",name:"Index",component:function(){return n.e(3).then(n.bind(null,"tlXl"))}},{path:"manage",name:"Manage",component:function(){return n.e(4).then(n.bind(null,"tDkG"))}},{path:"enroll",name:"Enroll",component:function(){return n.e(5).then(n.bind(null,"Mk7d"))}},{path:"site",name:"Site",component:function(){return n.e(0).then(n.bind(null,"7kpa"))}},{path:"college",name:"College",component:function(){return n.e(14).then(n.bind(null,"4YY1"))}},{path:"college_integrate",name:"College_integrate",component:function(){return n.e(13).then(n.bind(null,"qNIs"))}},{path:"draft",name:"Draft",component:function(){return n.e(6).then(n.bind(null,"ezEV"))}},{path:"udraft",name:"UDraft",component:function(){return n.e(10).then(n.bind(null,"W1Qr"))}},{path:"uManage",name:"UManage",component:function(){return n.e(9).then(n.bind(null,"E6gx"))}},{path:"uStudent",name:"UStudent",component:function(){return n.e(12).then(n.bind(null,"XWeK"))}},{path:"udrafted",name:"UDrafted",component:function(){return n.e(2).then(n.bind(null,"R/UW"))}}]},{path:"/login",name:"Login",component:function(){return n.e(8).then(n.bind(null,"ook+"))}},{path:"/retrievePwd",name:"RetrievePwd",component:function(){return n.e(7).then(n.bind(null,"f0lz"))}},{path:"*",component:u}]}),w=n("zL8q"),x=n.n(w),S=(n("tvR6"),n("mtWM")),y=n.n(S),k=n("d6XX"),C=n.n(k),U=(n("OfmF"),n("XLwt"));r.default.prototype.$echarts=U,r.default.use(C.a),r.default.prototype.axios=y.a,r.default.use(s.a),r.default.use(x.a,{size:"small"}),r.default.config.productionTip=!1,new r.default({el:"#app",router:_,components:{App:i},template:"<App/>"})},"Nj+P":function(e,t){},OfmF:function(e,t){},UuT6:function(e,t){},b0Or:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b0881291a7c80e549bb4.js.map